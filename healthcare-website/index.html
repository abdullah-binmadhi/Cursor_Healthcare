<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthCare Analytics - Enhanced v2.7 (Realistic Hospital Variations)</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #2d3748;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 1rem 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.5rem;
            font-weight: 800;
            color: #667eea;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            text-decoration: none;
            color: #4a5568;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover, .nav-link.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #667eea;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
        }

        .mobile-menu-toggle:hover {
            color: #764ba2;
        }

        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .hero-section {
            text-align: center;
            margin-bottom: 3rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 3rem 2rem;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: rgba(255,255,255,0.9);
            margin-bottom: 2rem;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.9);
            color: #667eea;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .section {
            margin-bottom: 4rem;
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 3rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 1rem;
            text-align: center;
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: #6b7280;
            text-align: center;
            margin-bottom: 3rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: start;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .form-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .form-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #374151;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .results-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2rem;
            border-radius: 20px;
            margin-top: 2rem;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .feature-icon {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 1rem;
        }

        .feature-description {
            color: #6b7280;
            line-height: 1.6;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .cost-item.total {
            font-size: 1.2rem;
            font-weight: 700;
            border-bottom: none;
        }

        .doctor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .doctor-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .doctor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
        }

        .chart-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 2rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f1f5f9;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1a202c;
        }

        .chart-controls select {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 0.75rem 1rem;
            font-weight: 600;
            color: #374151;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chart-controls select:hover {
            border-color: #667eea;
        }

        .year-tabs {
            display: flex;
            gap: 0.5rem;
        }

        .year-tab {
            background: rgba(255, 255, 255, 0.7);
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .year-tab:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
        }

        .year-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #667eea;
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .chart-canvas {
            position: relative;
            height: 400px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            padding: 1rem;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .form-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .form-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f1f5f9;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.875rem 1.25rem;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: rgba(255, 255, 255, 1);
        }

        .form-group input:hover,
        .form-group select:hover {
            border-color: #9ca3af;
        }

        .results-card {
            background: rgba(102, 126, 234, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(102, 126, 234, 0.2);
        }

        .cost-breakdown {
            margin-bottom: 1.5rem;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(102, 126, 234, 0.1);
        }

        .cost-item.total {
            font-weight: 700;
            font-size: 1.1rem;
            border-bottom: 2px solid #667eea;
            color: #667eea;
        }

        .cost-label {
            color: #4a5568;
            font-weight: 600;
        }

        .cost-value {
            color: #1a202c;
            font-weight: 700;
        }

        .cost-factors h4 {
            color: #667eea;
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }

        .cost-factors ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .cost-factors li {
            padding: 0.5rem 0;
            color: #4a5568;
            border-left: 3px solid #667eea;
            padding-left: 1rem;
            margin-bottom: 0.5rem;
            background: rgba(102, 126, 234, 0.03);
            border-radius: 0 8px 8px 0;
        }

        .doctor-grid {
            display: grid;
            gap: 1rem;
            max-height: 500px;
            overflow-y: auto;
        }

        .doctor-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .doctor-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .doctor-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .doctor-name {
            font-weight: 700;
            color: #1a202c;
            font-size: 1.1rem;
        }

        .doctor-specialty {
            color: #667eea;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .doctor-rating {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            color: #f59e0b;
            font-weight: 600;
        }

        .doctor-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #6b7280;
        }

        .results-header {
            padding: 1rem 0;
            border-bottom: 2px solid #f1f5f9;
            margin-bottom: 1rem;
            font-weight: 600;
            color: #374151;
        }

        .value-propositions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .value-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .value-card:hover {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }

        .value-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .value-card:nth-child(1) .value-icon {
            color: #10b981; /* Green for Affordable Care */
        }

        .value-card:nth-child(2) .value-icon {
            color: #3b82f6; /* Blue for Trusted Doctors */
        }

        .value-card:nth-child(3) .value-icon {
            color: #667eea; /* Purple for Transparent Costs */
        }

        .value-card:nth-child(4) .value-icon {
            color: #f59e0b; /* Orange for Data-Driven Insights */
        }

        .value-card:nth-child(5) .value-icon {
            color: #6366f1; /* Indigo for Secure & Private */
        }

        .value-card:nth-child(6) .value-icon {
            color: #ef4444; /* Red for 24/7 Support */
        }

        .value-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 0.75rem;
        }

        .value-description {
            color: #4a5568;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .header-content {
                padding: 0 1rem;
            }

            .logo {
                font-size: 1.2rem;
            }

            .logo span {
                display: none;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                width: 70%;
                max-width: 300px;
                height: 100vh;
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(20px);
                flex-direction: column;
                padding: 5rem 2rem 2rem;
                gap: 0;
                box-shadow: -5px 0 20px rgba(0, 0, 0, 0.1);
                transition: right 0.3s ease;
                z-index: 1000;
            }

            .nav-links.active {
                right: 0;
            }

            .nav-link {
                width: 100%;
                padding: 1rem;
                margin-bottom: 0.5rem;
                text-align: left;
            }

            .container {
                padding: 0 1rem;
            }

            .hero-section {
                padding: 2rem 1rem;
            }

            .hero-title { 
                font-size: 2rem; 
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .form-grid { 
                grid-template-columns: 1fr; 
            }

            .chart-grid { 
                grid-template-columns: 1fr; 
            }

            .kpi-grid { 
                grid-template-columns: 1fr; 
            }

            .value-propositions { 
                grid-template-columns: 1fr;
                gap: 1rem; 
            }

            .doctor-details { 
                grid-template-columns: 1fr; 
            }

            .stat-card {
                padding: 1.5rem;
            }

            .card {
                padding: 1.5rem;
            }

            /* Analytics Dashboard Mobile Fixes */
            #analytics .chart-controls {
                flex-direction: column;
                gap: 0.5rem;
            }

            #analytics select {
                width: 100% !important;
                min-width: 100% !important;
                font-size: 0.9rem;
                padding: 0.5rem !important;
            }

            #analytics .year-tabs {
                display: flex;
                gap: 0.5rem;
                width: 100%;
            }

            #analytics .year-tab {
                flex: 1;
                padding: 0.5rem 0.75rem;
                font-size: 0.85rem;
            }

            #analytics .chart-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            #analytics .chart-title {
                font-size: 1rem;
            }

            #analytics .chart-card {
                padding: 1rem;
            }

            #analytics .chart-canvas {
                height: 300px !important;
            }

            /* Hospital selector mobile fix */
            #hospitalSelector {
                min-width: 100% !important;
                width: 100% !important;
                padding: 0.75rem 1rem !important;
            }

            /* Doctor Finder Mobile Fixes */
            #doctor-finder .doctor-grid {
                grid-template-columns: 1fr !important;
            }

            #doctor-finder .doctor-card {
                padding: 1rem;
            }

            #doctor-finder .results-header {
                padding: 0.75rem;
                font-size: 0.9rem;
            }

            /* About Section Mobile Fixes */
            #about .stats-grid {
                grid-template-columns: 1fr !important;
                gap: 0.75rem !important;
            }

            #about .stat-number {
                font-size: 1.5rem !important;
            }

            #about .stat-label {
                font-size: 0.8rem !important;
            }

            #about h3 {
                font-size: 1.2rem;
            }

            #about h4 {
                font-size: 1rem;
            }

            #about p, #about ul {
                font-size: 0.9rem;
                line-height: 1.6;
            }

            #about ul {
                padding-left: 1rem;
            }

            /* Form cards mobile padding */
            .form-card {
                padding: 1.5rem 1rem;
            }

            .form-title {
                font-size: 1.2rem;
            }

            /* Section cards mobile */
            .section-card {
                padding: 1.5rem 1rem;
            }

            .section-title {
                font-size: 1.5rem;
                text-align: center;
            }

            .section-subtitle {
                font-size: 0.9rem;
                text-align: center;
            }

            /* Cost estimator results mobile */
            #costResults {
                padding: 1rem;
            }

            .cost-breakdown {
                gap: 0.75rem;
            }

            .cost-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }

            /* Responsive overflow fixes */
            * {
                overflow-wrap: break-word;
                word-wrap: break-word;
            }

            select, input, button {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-heartbeat"></i>
                <span>HealthCare Analytics</span>
            </div>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                <i class="fas fa-bars" id="menu-icon"></i>
            </button>
            <nav class="nav-links" id="navLinks">
                <a href="#" class="nav-link active" onclick="showSection('home'); closeMobileMenu();">Home</a>
                <a href="#" class="nav-link" onclick="showSection('cost-estimator'); closeMobileMenu();">Cost Estimator</a>
                <a href="#" class="nav-link" onclick="showSection('doctor-finder'); closeMobileMenu();">Find Doctors</a>
                <a href="#" class="nav-link" onclick="showSection('analytics'); closeMobileMenu();">Analytics</a>
                <a href="#" class="nav-link" onclick="showSection('about'); closeMobileMenu();">About</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <!-- Home/Hero Section -->
        <section id="home" class="section active">
            <div class="hero-section">
                <h1 class="hero-title">Healthcare Transparency First</h1>
                <p class="hero-subtitle">Breaking down healthcare's hidden barriers with transparent pricing, physician performance data, and clear insights - because you deserve to know what you're paying for and why</p>
                <div class="value-propositions">
                    <div class="value-card">
                        <i class="fas fa-hand-holding-usd value-icon"></i>
                        <h3 class="value-title">Transparent Pricing</h3>
                        <p class="value-description">End the era of surprise medical bills. See exact costs upfront, compare prices across providers, and understand exactly what you'll pay before any procedure.</p>
                    </div>
                    
                    <div class="value-card">
                        <i class="fas fa-user-md value-icon"></i>
                        <h3 class="value-title">Open Doctor Data</h3>
                        <p class="value-description">No more guessing about physician quality. Access transparent performance metrics, real patient satisfaction scores, and success rates to make truly informed healthcare decisions.</p>
                    </div>
                    
                    <div class="value-card">
                        <i class="fas fa-receipt value-icon"></i>
                        <h3 class="value-title">Zero Hidden Fees</h3>
                        <p class="value-description">Healthcare's hidden fee nightmare ends here. Every cost breakdown is crystal clear - see procedure costs, insurance coverage, and your exact out-of-pocket expenses with complete transparency.</p>
                    </div>
                    
                    <div class="value-card">
                        <i class="fas fa-chart-line value-icon"></i>
                        <h3 class="value-title">Open Healthcare Data</h3>
                        <p class="value-description">Healthcare data shouldn't be locked away. Access real-time analytics, transparent performance metrics, and comprehensive insights that empower you to make informed decisions about your care.</p>
                    </div>
                    
                    <div class="value-card">
                        <i class="fas fa-shield-alt value-icon"></i>
                        <h3 class="value-title">Secure & Private</h3>
                        <p class="value-description">HIPAA-compliant platform with bank-level encryption ensuring your personal health information remains completely secure and private.</p>
                    </div>
                    
                    <div class="value-card">
                        <i class="fas fa-headset value-icon"></i>
                        <h3 class="value-title">24/7 Support</h3>
                        <p class="value-description">Round-the-clock customer support with healthcare specialists ready to assist with cost questions and provider recommendations.</p>
                    </div>
                </div>
                
                <!-- Transparency Mission Section -->
                <div style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px); border-radius: 20px; padding: 3rem; margin-top: 4rem; text-align: center; border: 1px solid rgba(255, 255, 255, 0.2);">
                    <h2 style="color: white; font-size: 2rem; font-weight: 700; margin-bottom: 1.5rem;">üîç Our Transparency Mission</h2>
                    <p style="color: rgba(255,255,255,0.9); font-size: 1.2rem; line-height: 1.7; max-width: 800px; margin: 0 auto;">
                        Healthcare has been shrouded in secrecy for too long. We believe every patient deserves to know <strong>exactly what they're paying for</strong>, 
                        <strong>who they're seeing</strong>, and <strong>what outcomes to expect</strong>. Our platform tears down the walls of healthcare opacity, 
                        putting transparent data and clear pricing directly in your hands - because informed patients make better healthcare decisions.
                    </p>
                </div>
            </div>
        </section>

        <!-- Healthcare Cost Estimator -->
        <section id="cost-estimator" class="section">
            <div class="section-card">
                <h2 class="section-title"><i class="fas fa-calculator"></i> Healthcare Cost Estimator</h2>
                <p class="section-subtitle">Get transparent pricing for medical procedures and plan your healthcare budget</p>

                <div class="form-grid">
                    <div class="form-card">
                        <h3 class="form-title">Patient Information</h3>
                        <form id="costEstimatorForm">
                            <div class="form-group">
                                <label for="patientAge">Age</label>
                                <input type="number" id="patientAge" min="1" max="120" required>
                            </div>

                            <div class="form-group">
                                <label for="insuranceType">Insurance Type</label>
                                <select id="insuranceType" required>
                                    <option value="">Select Insurance</option>
                                    <option value="medicare">Medicare</option>
                                    <option value="medicaid">Medicaid</option>
                                    <option value="private">Private Insurance</option>
                                    <option value="self-pay">Self-Pay</option>
                                    <option value="commercial">Commercial</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="department">Department</label>
                                <select id="department" required>
                                    <option value="">Select Department</option>
                                    <option value="Cardiology">Cardiology</option>
                                    <option value="Emergency">Emergency</option>
                                    <option value="Surgery">Surgery</option>
                                    <option value="Orthopedics">Orthopedics</option>
                                    <option value="Neurology">Neurology</option>
                                    <option value="Pediatrics">Pediatrics</option>
                                    <option value="Oncology">Oncology</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="procedure">Procedure Type</label>
                                <select id="procedure" required>
                                    <option value="">Select Procedure</option>
                                    <option value="consultation">Consultation</option>
                                    <option value="diagnostic">Diagnostic Test</option>
                                    <option value="minor-surgery">Minor Surgery</option>
                                    <option value="major-surgery">Major Surgery</option>
                                    <option value="emergency-visit">Emergency Visit</option>
                                    <option value="follow-up">Follow-up Visit</option>
                                </select>
                            </div>

                            <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                                <i class="fas fa-calculator"></i> Calculate Estimate
                            </button>
                        </form>
                    </div>

                    <div class="form-card">
                        <h3 class="form-title">Cost Estimation Results</h3>
                        <div class="results-card" id="costResults" style="display: none;">
                            <div class="cost-breakdown">
                                <div class="cost-item">
                                    <span class="cost-label">Estimated Cost:</span>
                                    <span class="cost-value" id="estimatedCost">$0</span>
                                </div>
                                <div class="cost-item">
                                    <span class="cost-label">Insurance Coverage:</span>
                                    <span class="cost-value" id="insuranceCoverage">$0</span>
                                </div>
                                <div class="cost-item total">
                                    <span class="cost-label">Your Estimated Cost:</span>
                                    <span class="cost-value" id="patientCost">$0</span>
                                </div>
                                <div class="cost-item">
                                    <span class="cost-label">Estimated Length of Stay:</span>
                                    <span class="cost-value" id="lengthOfStay">-</span>
                                </div>
                            </div>
                            <div class="cost-factors">
                                <h4>Factors Affecting Cost:</h4>
                                <ul id="costFactors"></ul>
                            </div>
                        </div>
                        <div id="costResultsPlaceholder" style="text-align: center; color: #6b7280; padding: 3rem;">
                            <i class="fas fa-calculator" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                            <p>Enter patient information and click "Calculate Estimate" to see results</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Doctor Finder -->
        <section id="doctor-finder" class="section">
            <div class="section-card">
                <h2 class="section-title"><i class="fas fa-user-md"></i> Doctor Finder & Ratings</h2>
                <p class="section-subtitle">Find qualified physicians with performance metrics and patient satisfaction scores</p>

                <div class="form-grid">
                    <div class="form-card">
                        <h3 class="form-title">Search Filters</h3>
                        <div class="form-group">
                            <label for="specialtyFilter">Specialty</label>
                            <select id="specialtyFilter">
                                <option value="">All Specialties</option>
                                <option value="Cardiology">Cardiology</option>
                                <option value="Emergency Medicine">Emergency Medicine</option>
                                <option value="Surgery">Surgery</option>
                                <option value="Orthopedics">Orthopedics</option>
                                <option value="Neurology">Neurology</option>
                                <option value="Pediatrics">Pediatrics</option>
                                <option value="Oncology">Oncology</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="hospitalFilter">Hospital</label>
                            <select id="hospitalFilter">
                                <option value="">All Hospitals</option>
                                <option value="City General Hospital">City General Hospital</option>
                                <option value="St. Mary's Medical Center">St. Mary's Medical Center</option>
                                <option value="University Health System">University Health System</option>
                                <option value="Memorial Hospital">Memorial Hospital</option>
                                <option value="Regional Medical Center">Regional Medical Center</option>
                                <option value="Community Health Hospital">Community Health Hospital</option>
                                <option value="Metropolitan Medical Center">Metropolitan Medical Center</option>
                                <option value="Riverside Hospital">Riverside Hospital</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="ratingFilter">Minimum Rating</label>
                            <select id="ratingFilter">
                                <option value="0">Any Rating</option>
                                <option value="3">3+ Stars</option>
                                <option value="4">4+ Stars</option>
                                <option value="4.5">4.5+ Stars</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="availabilityFilter">Availability</label>
                            <select id="availabilityFilter">
                                <option value="">Any Availability</option>
                                <option value="available">Available This Week</option>
                                <option value="limited">Limited Availability</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-card">
                        <h3 class="form-title">Doctor Search Results</h3>
                        <div class="results-header">
                            <span id="doctorCount">0 doctors found</span>
                        </div>
                        <div id="doctorList" class="doctor-grid">
                            <!-- Doctor cards will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analytics Dashboard -->
        <section id="analytics" class="section">
            <div class="section-card">
                <h2 class="section-title"><i class="fas fa-chart-bar"></i> Healthcare Analytics Dashboard</h2>
                <p class="section-subtitle">Professional healthcare insights and data visualization</p>

                <!-- Global Dashboard Controls -->
                <div style="background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); border-radius: 20px; padding: 1.5rem; margin-bottom: 2rem; box-shadow: 0 8px 30px rgba(0,0,0,0.1); border: 2px solid #e2e8f0;">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; justify-content: center; width: 100%;">
                            <i class="fas fa-hospital" style="color: #667eea; font-size: 1.2rem;"></i>
                            <label for="hospitalSelector" style="font-weight: 600; color: #1a202c; font-size: 0.95rem;">Hospital:</label>
                            <select id="hospitalSelector" onchange="updateAllChartsForHospital()" style="padding: 0.5rem 1rem; border: 2px solid #e2e8f0; border-radius: 10px; background: white; font-weight: 500; min-width: 180px; max-width: 100%; cursor: pointer; font-size: 0.9rem;">
                                <option value="all">All Hospitals</option>
                                <option value="City General Hospital">City General Hospital</option>
                                <option value="St. Mary's Medical Center">St. Mary's Medical Center</option>
                                <option value="University Health System">University Health System</option>
                                <option value="Memorial Hospital">Memorial Hospital</option>
                                <option value="Regional Medical Center">Regional Medical Center</option>
                                <option value="Community Health Hospital">Community Health Hospital</option>
                                <option value="Metropolitan Medical Center">Metropolitan Medical Center</option>
                                <option value="Riverside Hospital">Riverside Hospital</option>
                            </select>
                        </div>
                        <div style="font-size: 0.85rem; color: #6b7280; font-style: italic; text-align: center; width: 100%;">üí° Select a hospital to filter all analytics charts</div>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="chart-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <div class="chart-title">üè• Department Performance</div>
                            <div class="chart-controls">
                                <select id="performanceMetric">
                                    <option value="satisfaction">Patient Satisfaction</option>
                                    <option value="revenue">Revenue</option>
                                    <option value="occupancy">Occupancy Rate</option>
                                </select>
                            </div>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="departmentChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <div class="chart-header">
                            <div class="chart-title">üìà Performance Trends</div>
                            <div class="chart-controls">
                                <div class="year-tabs">
                                    <button class="year-tab active" data-year="2024" onclick="changeTrendsYear(2024)">2024</button>
                                    <button class="year-tab" data-year="2023" onclick="changeTrendsYear(2023)">2023</button>
                                    <button class="year-tab" data-year="2022" onclick="changeTrendsYear(2022)">2022</button>
                                </div>
                            </div>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="trendsChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <div class="chart-header">
                            <div class="chart-title">üéØ Quality Metrics</div>
                            <div class="chart-controls">
                                <select id="qualityMetricFilter" onchange="updateQualityChart()">
                                    <option value="departments">By Department</option>
                                    <option value="hospital">By Hospital Unit</option>
                                </select>
                            </div>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="qualityChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <div class="chart-header">
                            <div class="chart-title">üèÜ Top Performing Physicians</div>
                            <div class="chart-controls">
                                <select id="physicianSpecialty" onchange="updatePhysiciansChart()">
                                    <option value="all">All Specialties</option>
                                    <option value="Cardiology">Cardiology</option>
                                    <option value="Surgery">Surgery</option>
                                    <option value="Emergency">Emergency Medicine</option>
                                    <option value="Pediatrics">Pediatrics</option>
                                    <option value="Oncology">Oncology</option>
                                    <option value="Orthopedics">Orthopedics</option>
                                    <option value="Neurology">Neurology</option>
                                </select>
                            </div>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="physiciansChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section">
            <div class="section-card">
                <h2 class="section-title"><i class="fas fa-info-circle"></i> About HealthCare Analytics</h2>
                <p class="section-subtitle">Transforming healthcare through data-driven insights and transparent pricing</p>

                <div class="form-grid">
                    <div class="form-card">
                        <h3 class="form-title">Our Mission</h3>
                        <p style="line-height: 1.7; color: #4a5568; margin-bottom: 1.5rem;">
                            We believe healthcare should be transparent, accessible, and data-driven. Our platform empowers patients and providers with real-time insights, accurate cost estimates, and performance analytics to make informed healthcare decisions.
                        </p>
                        <div style="background: rgba(102, 126, 234, 0.1); padding: 1.5rem; border-radius: 15px; border-left: 4px solid #667eea;">
                            <h4 style="margin: 0 0 0.5rem 0; color: #667eea;">Key Features</h4>
                            <ul style="margin: 0; padding-left: 1.2rem; color: #4a5568;">
                                <li>Real-time healthcare cost estimation</li>
                                <li>Physician performance analytics</li>
                                <li>Interactive dashboard with live data</li>
                                <li>Transparent pricing across procedures</li>
                            </ul>
                        </div>
                    </div>

                    <div class="form-card">
                        <h3 class="form-title">Platform Statistics</h3>
                        <div class="stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <div style="text-align: center; padding: 1.25rem 0.75rem; background: rgba(16, 185, 129, 0.1); border-radius: 15px;">
                                <div class="stat-number" style="font-size: 1.75rem; font-weight: 800; color: #10b981; margin-bottom: 0.5rem;">500+</div>
                                <div class="stat-label" style="color: #4a5568; font-weight: 600; font-size: 0.85rem;">Healthcare Providers</div>
                            </div>
                            <div style="text-align: center; padding: 1.25rem 0.75rem; background: rgba(59, 130, 246, 0.1); border-radius: 15px;">
                                <div class="stat-number" style="font-size: 1.75rem; font-weight: 800; color: #3b82f6; margin-bottom: 0.5rem;">10K+</div>
                                <div class="stat-label" style="color: #4a5568; font-weight: 600; font-size: 0.85rem;">Cost Estimates</div>
                            </div>
                            <div style="text-align: center; padding: 1.25rem 0.75rem; background: rgba(139, 92, 246, 0.1); border-radius: 15px;">
                                <div class="stat-number" style="font-size: 1.75rem; font-weight: 800; color: #8b5cf6; margin-bottom: 0.5rem;">98%</div>
                                <div class="stat-label" style="color: #4a5568; font-weight: 600; font-size: 0.85rem;">Accuracy Rate</div>
                            </div>
                            <div style="text-align: center; padding: 1.25rem 0.75rem; background: rgba(245, 158, 11, 0.1); border-radius: 15px;">
                                <div class="stat-number" style="font-size: 1.75rem; font-weight: 800; color: #f59e0b; margin-bottom: 0.5rem;">24/7</div>
                                <div class="stat-label" style="color: #4a5568; font-weight: 600; font-size: 0.85rem;">Live Analytics</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(102, 126, 234, 0.05); border-radius: 15px; text-align: center;">
                            <h4 style="margin: 0 0 1rem 0; color: #667eea;">Contact Us</h4>
                            <p style="margin: 0; color: #4a5568; line-height: 1.6;">
                                Have questions or need support? Reach out to our team at <strong>support@healthcareanalytics.com</strong> or call <strong>(555) 123-4567</strong>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
    <script>
        /* CACHE BUST v2.7 - Realistic Hospital-Specific Performance Variations - 2025-08-26 */
        console.log('üöÄ Dashboard v2.7 - Realistic Hospital Variations: Different hospitals excel in different departments!');
        
        // Navigation functionality
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show target section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to corresponding nav link
            event.target.classList.add('active');
            
            // Load analytics dashboard if analytics section is shown
            if (sectionId === 'analytics') {
                loadDashboardData();
            }
        }

        // Mobile menu toggle functions
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const menuIcon = document.getElementById('menu-icon');
            
            navLinks.classList.toggle('active');
            
            // Toggle hamburger/close icon
            if (navLinks.classList.contains('active')) {
                menuIcon.classList.remove('fa-bars');
                menuIcon.classList.add('fa-times');
            } else {
                menuIcon.classList.remove('fa-times');
                menuIcon.classList.add('fa-bars');
            }
        }

        function closeMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const menuIcon = document.getElementById('menu-icon');
            
            if (window.innerWidth <= 768) {
                navLinks.classList.remove('active');
                menuIcon.classList.remove('fa-times');
                menuIcon.classList.add('fa-bars');
            }
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const navLinks = document.getElementById('navLinks');
            const menuToggle = document.querySelector('.mobile-menu-toggle');
            
            if (window.innerWidth <= 768 && 
                navLinks.classList.contains('active') && 
                !navLinks.contains(event.target) && 
                !menuToggle.contains(event.target)) {
                closeMobileMenu();
            }
        });

        // Cost estimator form handler
        document.getElementById('costEstimatorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const age = parseInt(document.getElementById('patientAge').value);
            const insuranceType = document.getElementById('insuranceType').value;
            const department = document.getElementById('department').value;
            const procedure = document.getElementById('procedure').value;
            
            // Calculate base cost based on procedure
            let baseCost = 0;
            switch(procedure) {
                case 'consultation': baseCost = 250; break;
                case 'diagnostic': baseCost = 800; break;
                case 'minor-surgery': baseCost = 3500; break;
                case 'major-surgery': baseCost = 25000; break;
                case 'emergency-visit': baseCost = 1500; break;
                case 'follow-up': baseCost = 150; break;
            }
            
            // Department cost multiplier
            const deptMultipliers = {
                'Cardiology': 1.3,
                'Emergency': 1.2,
                'Surgery': 1.4,
                'Orthopedics': 1.25,
                'Neurology': 1.35,
                'Pediatrics': 0.9,
                'Oncology': 1.5
            };
            baseCost *= (deptMultipliers[department] || 1.0);
            
            // Age adjustment
            if (age > 65) baseCost *= 1.15;
            if (age < 18) baseCost *= 0.85;
            
            // Insurance coverage calculation
            let coverageRate = 0;
            switch(insuranceType) {
                case 'medicare': coverageRate = 0.80; break;
                case 'medicaid': coverageRate = 0.85; break;
                case 'private': coverageRate = 0.75; break;
                case 'commercial': coverageRate = 0.70; break;
                case 'self-pay': coverageRate = 0; break;
            }
            
            const insuranceCoverage = baseCost * coverageRate;
            const outOfPocket = baseCost - insuranceCoverage;
            
            // Display results
            document.getElementById('estimatedCost').textContent = '$' + baseCost.toFixed(2);
            document.getElementById('insuranceCoverage').textContent = '$' + insuranceCoverage.toFixed(2);
            document.getElementById('outOfPocket').textContent = '$' + outOfPocket.toFixed(2);
            document.getElementById('costResults').style.display = 'block';
        });

        let chartInstances = {};
        let dashboardData = {};
        let currentTrendsYear = 2024; // Track current year for trends chart
        let currentHospital = 'all'; // Track current hospital filter
        
        // Comprehensive hospital-based healthcare data for synchronized charts
        const healthcareDataByYear = {
            2024: {
                // Hospital-specific department metrics
                departments: {
                    'all': [
                        { department_name: 'Surgery', patient_satisfaction: 4.5, current_occupancy: 0.78, total_patients: 890, average_cost: 12500, quality_score: 95 },
                        { department_name: 'Cardiology', patient_satisfaction: 4.2, current_occupancy: 0.85, total_patients: 1250, average_cost: 8500, quality_score: 92 },
                        { department_name: 'Emergency', patient_satisfaction: 3.8, current_occupancy: 0.92, total_patients: 2100, average_cost: 3200, quality_score: 87 },
                        { department_name: 'Oncology', patient_satisfaction: 4.4, current_occupancy: 0.82, total_patients: 380, average_cost: 15800, quality_score: 91 },
                        { department_name: 'Pediatrics', patient_satisfaction: 4.6, current_occupancy: 0.58, total_patients: 720, average_cost: 4500, quality_score: 93 },
                        { department_name: 'Orthopedics', patient_satisfaction: 4.3, current_occupancy: 0.72, total_patients: 680, average_cost: 9800, quality_score: 90 },
                        { department_name: 'Neurology', patient_satisfaction: 4.1, current_occupancy: 0.65, total_patients: 450, average_cost: 11200, quality_score: 88 }
                    ],
                    'City General Hospital': [
                        { department_name: 'Surgery', patient_satisfaction: 4.6, current_occupancy: 0.82, total_patients: 120, average_cost: 13000, quality_score: 96 },
                        { department_name: 'Cardiology', patient_satisfaction: 4.3, current_occupancy: 0.88, total_patients: 180, average_cost: 8800, quality_score: 93 },
                        { department_name: 'Emergency', patient_satisfaction: 3.9, current_occupancy: 0.95, total_patients: 280, average_cost: 3300, quality_score: 88 },
                        { department_name: 'Oncology', patient_satisfaction: 4.5, current_occupancy: 0.85, total_patients: 55, average_cost: 16200, quality_score: 92 },
                        { department_name: 'Pediatrics', patient_satisfaction: 4.7, current_occupancy: 0.62, total_patients: 95, average_cost: 4700, quality_score: 94 },
                        { department_name: 'Orthopedics', patient_satisfaction: 4.4, current_occupancy: 0.75, total_patients: 85, average_cost: 10200, quality_score: 91 },
                        { department_name: 'Neurology', patient_satisfaction: 4.2, current_occupancy: 0.68, total_patients: 60, average_cost: 11500, quality_score: 89 }
                    ],
                    'St. Mary\'s Medical Center': [
                        { department_name: 'Surgery', patient_satisfaction: 4.4, current_occupancy: 0.75, total_patients: 110, average_cost: 12200, quality_score: 94 },
                        { department_name: 'Cardiology', patient_satisfaction: 4.1, current_occupancy: 0.83, total_patients: 160, average_cost: 8300, quality_score: 91 },
                        { department_name: 'Emergency', patient_satisfaction: 3.7, current_occupancy: 0.90, total_patients: 260, average_cost: 3100, quality_score: 86 },
                        { department_name: 'Oncology', patient_satisfaction: 4.3, current_occupancy: 0.80, total_patients: 48, average_cost: 15600, quality_score: 90 },
                        { department_name: 'Pediatrics', patient_satisfaction: 4.5, current_occupancy: 0.55, total_patients: 90, average_cost: 4400, quality_score: 92 },
                        { department_name: 'Orthopedics', patient_satisfaction: 4.2, current_occupancy: 0.70, total_patients: 82, average_cost: 9600, quality_score: 89 },
                        { department_name: 'Neurology', patient_satisfaction: 4.0, current_occupancy: 0.62, total_patients: 55, average_cost: 11000, quality_score: 87 }
                    ],
                    'University Health System': [
                        { department_name: 'Surgery', patient_satisfaction: 4.7, current_occupancy: 0.80, total_patients: 115, average_cost: 13500, quality_score: 97 },
                        { department_name: 'Cardiology', patient_satisfaction: 4.4, current_occupancy: 0.87, total_patients: 170, average_cost: 9000, quality_score: 94 },
                        { department_name: 'Emergency', patient_satisfaction: 4.0, current_occupancy: 0.93, total_patients: 270, average_cost: 3400, quality_score: 89 },
                        { department_name: 'Oncology', patient_satisfaction: 4.6, current_occupancy: 0.88, total_patients: 52, average_cost: 16800, quality_score: 93 },
                        { department_name: 'Pediatrics', patient_satisfaction: 4.8, current_occupancy: 0.60, total_patients: 98, average_cost: 4800, quality_score: 95 },
                        { department_name: 'Orthopedics', patient_satisfaction: 4.5, current_occupancy: 0.78, total_patients: 88, average_cost: 10500, quality_score: 92 },
                        { department_name: 'Neurology', patient_satisfaction: 4.3, current_occupancy: 0.72, total_patients: 65, average_cost: 11800, quality_score: 90 }
                    ],
                    'Memorial Hospital': [
                        { department_name: 'Surgery', patient_satisfaction: 4.3, current_occupancy: 0.73, total_patients: 105, average_cost: 11800, quality_score: 93 },
                        { department_name: 'Cardiology', patient_satisfaction: 4.0, current_occupancy: 0.81, total_patients: 155, average_cost: 8100, quality_score: 90 },
                        { department_name: 'Emergency', patient_satisfaction: 3.6, current_occupancy: 0.88, total_patients: 250, average_cost: 2900, quality_score: 85 },
                        { department_name: 'Oncology', patient_satisfaction: 4.2, current_occupancy: 0.75, total_patients: 45, average_cost: 15200, quality_score: 89 },
                        { department_name: 'Pediatrics', patient_satisfaction: 4.4, current_occupancy: 0.52, total_patients: 85, average_cost: 4200, quality_score: 91 },
                        { department_name: 'Orthopedics', patient_satisfaction: 4.1, current_occupancy: 0.68, total_patients: 78, average_cost: 9400, quality_score: 88 },
                        { department_name: 'Neurology', patient_satisfaction: 3.9, current_occupancy: 0.58, total_patients: 50, average_cost: 10600, quality_score: 86 }
                    ],
                    'Regional Medical Center': [
                        { department_name: 'Surgery', patient_satisfaction: 4.5, current_occupancy: 0.77, total_patients: 112, average_cost: 12800, quality_score: 95 },
                        { department_name: 'Cardiology', patient_satisfaction: 4.2, current_occupancy: 0.84, total_patients: 165, average_cost: 8600, quality_score: 92 },
                        { department_name: 'Emergency', patient_satisfaction: 3.8, current_occupancy: 0.91, total_patients: 265, average_cost: 3200, quality_score: 87 },
                        { department_name: 'Oncology', patient_satisfaction: 4.4, current_occupancy: 0.82, total_patients: 50, average_cost: 15900, quality_score: 91 },
                        { department_name: 'Pediatrics', patient_satisfaction: 4.6, current_occupancy: 0.57, total_patients: 92, average_cost: 4500, quality_score: 93 },
                        { department_name: 'Orthopedics', patient_satisfaction: 4.3, current_occupancy: 0.71, total_patients: 83, average_cost: 9900, quality_score: 90 },
                        { department_name: 'Neurology', patient_satisfaction: 4.1, current_occupancy: 0.64, total_patients: 58, average_cost: 11300, quality_score: 88 }
                    ],
                    'Community Health Hospital': [
                        { department_name: 'Surgery', patient_satisfaction: 4.2, current_occupancy: 0.71, total_patients: 98, average_cost: 11500, quality_score: 92 },
                        { department_name: 'Cardiology', patient_satisfaction: 3.9, current_occupancy: 0.79, total_patients: 145, average_cost: 7900, quality_score: 89 },
                        { department_name: 'Emergency', patient_satisfaction: 3.5, current_occupancy: 0.86, total_patients: 240, average_cost: 2800, quality_score: 84 },
                        { department_name: 'Oncology', patient_satisfaction: 4.1, current_occupancy: 0.72, total_patients: 42, average_cost: 14800, quality_score: 88 },
                        { department_name: 'Pediatrics', patient_satisfaction: 4.3, current_occupancy: 0.50, total_patients: 80, average_cost: 4100, quality_score: 90 },
                        { department_name: 'Orthopedics', patient_satisfaction: 4.0, current_occupancy: 0.65, total_patients: 75, average_cost: 9200, quality_score: 87 },
                        { department_name: 'Neurology', patient_satisfaction: 3.8, current_occupancy: 0.55, total_patients: 48, average_cost: 10400, quality_score: 85 }
                    ],
                    'Metropolitan Medical Center': [
                        { department_name: 'Surgery', patient_satisfaction: 4.6, current_occupancy: 0.79, total_patients: 118, average_cost: 13200, quality_score: 96 },
                        { department_name: 'Cardiology', patient_satisfaction: 4.3, current_occupancy: 0.86, total_patients: 175, average_cost: 8700, quality_score: 93 },
                        { department_name: 'Emergency', patient_satisfaction: 3.9, current_occupancy: 0.94, total_patients: 275, average_cost: 3300, quality_score: 88 },
                        { department_name: 'Oncology', patient_satisfaction: 4.5, current_occupancy: 0.84, total_patients: 53, average_cost: 16100, quality_score: 92 },
                        { department_name: 'Pediatrics', patient_satisfaction: 4.7, current_occupancy: 0.59, total_patients: 96, average_cost: 4600, quality_score: 94 },
                        { department_name: 'Orthopedics', patient_satisfaction: 4.4, current_occupancy: 0.74, total_patients: 86, average_cost: 10100, quality_score: 91 },
                        { department_name: 'Neurology', patient_satisfaction: 4.2, current_occupancy: 0.67, total_patients: 62, average_cost: 11600, quality_score: 89 }
                    ],
                    'Riverside Hospital': [
                        { department_name: 'Surgery', patient_satisfaction: 4.4, current_occupancy: 0.76, total_patients: 108, average_cost: 12000, quality_score: 94 },
                        { department_name: 'Cardiology', patient_satisfaction: 4.1, current_occupancy: 0.82, total_patients: 158, average_cost: 8200, quality_score: 91 },
                        { department_name: 'Emergency', patient_satisfaction: 3.7, current_occupancy: 0.89, total_patients: 255, average_cost: 3000, quality_score: 86 },
                        { department_name: 'Oncology', patient_satisfaction: 4.3, current_occupancy: 0.78, total_patients: 47, average_cost: 15400, quality_score: 90 },
                        { department_name: 'Pediatrics', patient_satisfaction: 4.5, current_occupancy: 0.54, total_patients: 88, average_cost: 4300, quality_score: 92 },
                        { department_name: 'Orthopedics', patient_satisfaction: 4.2, current_occupancy: 0.69, total_patients: 80, average_cost: 9700, quality_score: 89 },
                        { department_name: 'Neurology', patient_satisfaction: 4.0, current_occupancy: 0.61, total_patients: 54, average_cost: 11100, quality_score: 87 }
                    ]
                },
                physicians: [
                    // City General Hospital
                    { first_name: 'Sarah', last_name: 'Johnson', specialty: 'Cardiology', hospital: 'City General Hospital', patient_satisfaction: 4.8 },
                    { first_name: 'Robert', last_name: 'Williams', specialty: 'Cardiology', hospital: 'City General Hospital', patient_satisfaction: 4.4 },
                    { first_name: 'Lisa', last_name: 'Chen', specialty: 'Cardiology', hospital: 'City General Hospital', patient_satisfaction: 4.6 },
                    { first_name: 'Michael', last_name: 'Chen', specialty: 'Surgery', hospital: 'City General Hospital', patient_satisfaction: 4.7 },
                    { first_name: 'Jennifer', last_name: 'Davis', specialty: 'Surgery', hospital: 'City General Hospital', patient_satisfaction: 4.6 },
                    { first_name: 'David', last_name: 'Martinez', specialty: 'Surgery', hospital: 'City General Hospital', patient_satisfaction: 4.5 },
                    { first_name: 'Rachel', last_name: 'Brown', specialty: 'Surgery', hospital: 'City General Hospital', patient_satisfaction: 4.3 },
                    { first_name: 'David', last_name: 'Thompson', specialty: 'Emergency', hospital: 'City General Hospital', patient_satisfaction: 4.5 },
                    { first_name: 'Christopher', last_name: 'Brown', specialty: 'Emergency', hospital: 'City General Hospital', patient_satisfaction: 4.2 },
                    { first_name: 'Jessica', last_name: 'Miller', specialty: 'Emergency', hospital: 'City General Hospital', patient_satisfaction: 4.0 },
                    { first_name: 'Emily', last_name: 'Rodriguez', specialty: 'Pediatrics', hospital: 'City General Hospital', patient_satisfaction: 4.9 },
                    { first_name: 'Amanda', last_name: 'Wilson', specialty: 'Pediatrics', hospital: 'City General Hospital', patient_satisfaction: 4.7 },
                    { first_name: 'Daniel', last_name: 'Taylor', specialty: 'Pediatrics', hospital: 'City General Hospital', patient_satisfaction: 4.5 },
                    { first_name: 'Lisa', last_name: 'Park', specialty: 'Oncology', hospital: 'City General Hospital', patient_satisfaction: 4.6 },
                    { first_name: 'Kevin', last_name: 'Taylor', specialty: 'Oncology', hospital: 'City General Hospital', patient_satisfaction: 4.4 },
                    { first_name: 'Sandra', last_name: 'Johnson', specialty: 'Oncology', hospital: 'City General Hospital', patient_satisfaction: 4.7 },
                    { first_name: 'James', last_name: 'Miller', specialty: 'Orthopedics', hospital: 'City General Hospital', patient_satisfaction: 4.3 },
                    { first_name: 'Susan', last_name: 'Thompson', specialty: 'Orthopedics', hospital: 'City General Hospital', patient_satisfaction: 4.1 },
                    { first_name: 'Richard', last_name: 'Brown', specialty: 'Orthopedics', hospital: 'City General Hospital', patient_satisfaction: 4.4 },
                    { first_name: 'Maria', last_name: 'Garcia', specialty: 'Neurology', hospital: 'City General Hospital', patient_satisfaction: 4.5 },
                    { first_name: 'John', last_name: 'Anderson', specialty: 'Neurology', hospital: 'City General Hospital', patient_satisfaction: 4.3 },
                    
                    // St. Mary's Medical Center  
                    { first_name: 'Mark', last_name: 'Thompson', specialty: 'Cardiology', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.2 },
                    { first_name: 'Anna', last_name: 'Rodriguez', specialty: 'Cardiology', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.7 },
                    { first_name: 'Thomas', last_name: 'Lee', specialty: 'Cardiology', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.5 },
                    { first_name: 'Steven', last_name: 'Wilson', specialty: 'Surgery', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.8 },
                    { first_name: 'Amy', last_name: 'Clark', specialty: 'Surgery', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.4 },
                    { first_name: 'Brian', last_name: 'Garcia', specialty: 'Emergency', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.3 },
                    { first_name: 'Nicole', last_name: 'Anderson', specialty: 'Emergency', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.1 },
                    { first_name: 'Michelle', last_name: 'Lee', specialty: 'Pediatrics', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.6 },
                    { first_name: 'Jason', last_name: 'White', specialty: 'Pediatrics', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.4 },
                    { first_name: 'Paul', last_name: 'Davis', specialty: 'Oncology', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.2 },
                    { first_name: 'Karen', last_name: 'Martinez', specialty: 'Oncology', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.5 },
                    { first_name: 'Linda', last_name: 'Wilson', specialty: 'Orthopedics', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.0 },
                    { first_name: 'Thomas', last_name: 'Garcia', specialty: 'Orthopedics', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.2 },
                    { first_name: 'Patricia', last_name: 'Martinez', specialty: 'Neurology', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.1 },
                    { first_name: 'William', last_name: 'Taylor', specialty: 'Neurology', hospital: 'St. Mary\'s Medical Center', patient_satisfaction: 4.4 },
                    
                    // University Health System (continue with more hospitals...)
                    { first_name: 'Barbara', last_name: 'Lee', specialty: 'Neurology', hospital: 'University Health System', patient_satisfaction: 3.9 },
                    { first_name: 'Charles', last_name: 'Kim', specialty: 'Cardiology', hospital: 'University Health System', patient_satisfaction: 4.6 },
                    { first_name: 'Helen', last_name: 'Chang', specialty: 'Surgery', hospital: 'University Health System', patient_satisfaction: 4.5 },
                    { first_name: 'Robert', last_name: 'Jackson', specialty: 'Emergency', hospital: 'University Health System', patient_satisfaction: 4.2 },
                    { first_name: 'Sarah', last_name: 'Moore', specialty: 'Pediatrics', hospital: 'University Health System', patient_satisfaction: 4.8 },
                    { first_name: 'Peter', last_name: 'Singh', specialty: 'Oncology', hospital: 'University Health System', patient_satisfaction: 4.4 },
                    { first_name: 'Nancy', last_name: 'Wright', specialty: 'Orthopedics', hospital: 'University Health System', patient_satisfaction: 4.3 },
                    
                    // Memorial Hospital
                    { first_name: 'George', last_name: 'Adams', specialty: 'Cardiology', hospital: 'Memorial Hospital', patient_satisfaction: 4.1 },
                    { first_name: 'Betty', last_name: 'Hall', specialty: 'Surgery', hospital: 'Memorial Hospital', patient_satisfaction: 4.3 },
                    { first_name: 'Donald', last_name: 'Allen', specialty: 'Emergency', hospital: 'Memorial Hospital', patient_satisfaction: 3.8 },
                    { first_name: 'Carol', last_name: 'Young', specialty: 'Pediatrics', hospital: 'Memorial Hospital', patient_satisfaction: 4.5 },
                    { first_name: 'Kenneth', last_name: 'King', specialty: 'Oncology', hospital: 'Memorial Hospital', patient_satisfaction: 4.2 },
                    { first_name: 'Dorothy', last_name: 'Scott', specialty: 'Orthopedics', hospital: 'Memorial Hospital', patient_satisfaction: 4.0 },
                    { first_name: 'Edward', last_name: 'Green', specialty: 'Neurology', hospital: 'Memorial Hospital', patient_satisfaction: 3.9 },
                    
                    // Regional Medical Center
                    { first_name: 'Frank', last_name: 'Baker', specialty: 'Cardiology', hospital: 'Regional Medical Center', patient_satisfaction: 4.4 },
                    { first_name: 'Ruth', last_name: 'Nelson', specialty: 'Surgery', hospital: 'Regional Medical Center', patient_satisfaction: 4.6 },
                    { first_name: 'Raymond', last_name: 'Carter', specialty: 'Emergency', hospital: 'Regional Medical Center', patient_satisfaction: 4.0 },
                    { first_name: 'Sharon', last_name: 'Mitchell', specialty: 'Pediatrics', hospital: 'Regional Medical Center', patient_satisfaction: 4.7 },
                    { first_name: 'Gregory', last_name: 'Perez', specialty: 'Oncology', hospital: 'Regional Medical Center', patient_satisfaction: 4.3 },
                    { first_name: 'Lisa', last_name: 'Roberts', specialty: 'Orthopedics', hospital: 'Regional Medical Center', patient_satisfaction: 4.2 },
                    { first_name: 'Kevin', last_name: 'Turner', specialty: 'Neurology', hospital: 'Regional Medical Center', patient_satisfaction: 4.1 },
                    
                    // Community Health Hospital
                    { first_name: 'Gary', last_name: 'Phillips', specialty: 'Cardiology', hospital: 'Community Health Hospital', patient_satisfaction: 3.8 },
                    { first_name: 'Cynthia', last_name: 'Campbell', specialty: 'Surgery', hospital: 'Community Health Hospital', patient_satisfaction: 4.1 },
                    { first_name: 'Larry', last_name: 'Parker', specialty: 'Emergency', hospital: 'Community Health Hospital', patient_satisfaction: 3.6 },
                    { first_name: 'Diane', last_name: 'Evans', specialty: 'Pediatrics', hospital: 'Community Health Hospital', patient_satisfaction: 4.3 },
                    { first_name: 'Terry', last_name: 'Edwards', specialty: 'Oncology', hospital: 'Community Health Hospital', patient_satisfaction: 4.0 },
                    { first_name: 'Joyce', last_name: 'Collins', specialty: 'Orthopedics', hospital: 'Community Health Hospital', patient_satisfaction: 3.9 },
                    { first_name: 'Harold', last_name: 'Stewart', specialty: 'Neurology', hospital: 'Community Health Hospital', patient_satisfaction: 3.7 },
                    
                    // Metropolitan Medical Center
                    { first_name: 'Wayne', last_name: 'Sanchez', specialty: 'Cardiology', hospital: 'Metropolitan Medical Center', patient_satisfaction: 4.5 },
                    { first_name: 'Janice', last_name: 'Morris', specialty: 'Surgery', hospital: 'Metropolitan Medical Center', patient_satisfaction: 4.7 },
                    { first_name: 'Arthur', last_name: 'Rogers', specialty: 'Emergency', hospital: 'Metropolitan Medical Center', patient_satisfaction: 4.1 },
                    { first_name: 'Cheryl', last_name: 'Reed', specialty: 'Pediatrics', hospital: 'Metropolitan Medical Center', patient_satisfaction: 4.8 },
                    { first_name: 'Ralph', last_name: 'Cook', specialty: 'Oncology', hospital: 'Metropolitan Medical Center', patient_satisfaction: 4.5 },
                    { first_name: 'Martha', last_name: 'Bell', specialty: 'Orthopedics', hospital: 'Metropolitan Medical Center', patient_satisfaction: 4.3 },
                    { first_name: 'Eugene', last_name: 'Murphy', specialty: 'Neurology', hospital: 'Metropolitan Medical Center', patient_satisfaction: 4.2 },
                    
                    // Riverside Hospital
                    { first_name: 'Louis', last_name: 'Bailey', specialty: 'Cardiology', hospital: 'Riverside Hospital', patient_satisfaction: 4.3 },
                    { first_name: 'Rose', last_name: 'Rivera', specialty: 'Surgery', hospital: 'Riverside Hospital', patient_satisfaction: 4.4 },
                    { first_name: 'Carl', last_name: 'Cooper', specialty: 'Emergency', hospital: 'Riverside Hospital', patient_satisfaction: 3.9 },
                    { first_name: 'Frances', last_name: 'Richardson', specialty: 'Pediatrics', hospital: 'Riverside Hospital', patient_satisfaction: 4.6 },
                    { first_name: 'Roy', last_name: 'Cox', specialty: 'Oncology', hospital: 'Riverside Hospital', patient_satisfaction: 4.2 },
                    { first_name: 'Katherine', last_name: 'Ward', specialty: 'Orthopedics', hospital: 'Riverside Hospital', patient_satisfaction: 4.1 },
                    { first_name: 'Albert', last_name: 'Torres', specialty: 'Neurology', hospital: 'Riverside Hospital', patient_satisfaction: 4.0 }
                ]
            },
            2023: {
                departments: [
                    { department_name: 'Surgery', patient_satisfaction: 4.3, current_occupancy: 0.75, total_patients: 820, average_cost: 12000, quality_score: 92 },
                    { department_name: 'Cardiology', patient_satisfaction: 4.0, current_occupancy: 0.82, total_patients: 1180, average_cost: 8200, quality_score: 89 },
                    { department_name: 'Emergency', patient_satisfaction: 3.6, current_occupancy: 0.89, total_patients: 1980, average_cost: 3100, quality_score: 84 },
                    { department_name: 'Oncology', patient_satisfaction: 4.2, current_occupancy: 0.79, total_patients: 350, average_cost: 15200, quality_score: 88 },
                    { department_name: 'Pediatrics', patient_satisfaction: 4.4, current_occupancy: 0.55, total_patients: 680, average_cost: 4300, quality_score: 90 },
                    { department_name: 'Orthopedics', patient_satisfaction: 4.1, current_occupancy: 0.69, total_patients: 630, average_cost: 9500, quality_score: 87 }
                ],
                physicians: [
                    // Cardiology (5 doctors)
                    { first_name: 'Sarah', last_name: 'Johnson', specialty: 'Cardiology', patient_satisfaction: 4.6 },
                    { first_name: 'Robert', last_name: 'Williams', specialty: 'Cardiology', patient_satisfaction: 4.2 },
                    { first_name: 'Lisa', last_name: 'Chen', specialty: 'Cardiology', patient_satisfaction: 4.4 },
                    { first_name: 'Mark', last_name: 'Thompson', specialty: 'Cardiology', patient_satisfaction: 4.0 },
                    { first_name: 'Anna', last_name: 'Rodriguez', specialty: 'Cardiology', patient_satisfaction: 4.5 },
                    // Surgery (5 doctors)
                    { first_name: 'Michael', last_name: 'Chen', specialty: 'Surgery', patient_satisfaction: 4.5 },
                    { first_name: 'Jennifer', last_name: 'Davis', specialty: 'Surgery', patient_satisfaction: 4.4 },
                    { first_name: 'David', last_name: 'Martinez', specialty: 'Surgery', patient_satisfaction: 4.3 },
                    { first_name: 'Rachel', last_name: 'Brown', specialty: 'Surgery', patient_satisfaction: 4.1 },
                    { first_name: 'Steven', last_name: 'Wilson', specialty: 'Surgery', patient_satisfaction: 4.6 },
                    // Emergency (5 doctors)
                    { first_name: 'David', last_name: 'Thompson', specialty: 'Emergency', patient_satisfaction: 4.3 },
                    { first_name: 'Christopher', last_name: 'Brown', specialty: 'Emergency', patient_satisfaction: 4.0 },
                    { first_name: 'Jessica', last_name: 'Miller', specialty: 'Emergency', patient_satisfaction: 3.8 },
                    { first_name: 'Brian', last_name: 'Garcia', specialty: 'Emergency', patient_satisfaction: 4.1 },
                    { first_name: 'Nicole', last_name: 'Anderson', specialty: 'Emergency', patient_satisfaction: 3.9 },
                    // Pediatrics (5 doctors)
                    { first_name: 'Emily', last_name: 'Rodriguez', specialty: 'Pediatrics', patient_satisfaction: 4.7 },
                    { first_name: 'Amanda', last_name: 'Wilson', specialty: 'Pediatrics', patient_satisfaction: 4.5 },
                    { first_name: 'Daniel', last_name: 'Taylor', specialty: 'Pediatrics', patient_satisfaction: 4.3 },
                    { first_name: 'Michelle', last_name: 'Lee', specialty: 'Pediatrics', patient_satisfaction: 4.4 },
                    { first_name: 'Jason', last_name: 'White', specialty: 'Pediatrics', patient_satisfaction: 4.2 },
                    // Oncology (5 doctors)
                    { first_name: 'Lisa', last_name: 'Park', specialty: 'Oncology', patient_satisfaction: 4.4 },
                    { first_name: 'Kevin', last_name: 'Taylor', specialty: 'Oncology', patient_satisfaction: 4.2 },
                    { first_name: 'Sandra', last_name: 'Johnson', specialty: 'Oncology', patient_satisfaction: 4.5 },
                    { first_name: 'Paul', last_name: 'Davis', specialty: 'Oncology', patient_satisfaction: 4.0 },
                    { first_name: 'Karen', last_name: 'Martinez', specialty: 'Oncology', patient_satisfaction: 4.3 },
                    // Orthopedics (5 doctors)
                    { first_name: 'James', last_name: 'Miller', specialty: 'Orthopedics', patient_satisfaction: 4.1 },
                    { first_name: 'Susan', last_name: 'Thompson', specialty: 'Orthopedics', patient_satisfaction: 3.9 },
                    { first_name: 'Richard', last_name: 'Brown', specialty: 'Orthopedics', patient_satisfaction: 4.2 },
                    { first_name: 'Linda', last_name: 'Wilson', specialty: 'Orthopedics', patient_satisfaction: 3.8 },
                    { first_name: 'Thomas', last_name: 'Garcia', specialty: 'Orthopedics', patient_satisfaction: 4.0 },
                    // Neurology (5 doctors)
                    { first_name: 'Maria', last_name: 'Garcia', specialty: 'Neurology', patient_satisfaction: 4.3 },
                    { first_name: 'John', last_name: 'Anderson', specialty: 'Neurology', patient_satisfaction: 4.1 },
                    { first_name: 'Patricia', last_name: 'Martinez', specialty: 'Neurology', patient_satisfaction: 3.9 },
                    { first_name: 'William', last_name: 'Taylor', specialty: 'Neurology', patient_satisfaction: 4.2 },
                    { first_name: 'Barbara', last_name: 'Lee', specialty: 'Neurology', patient_satisfaction: 3.7 }
                ]
            },
            2022: {
                departments: [
                    { department_name: 'Surgery', patient_satisfaction: 4.1, current_occupancy: 0.72, total_patients: 750, average_cost: 11500, quality_score: 89 },
                    { department_name: 'Cardiology', patient_satisfaction: 3.8, current_occupancy: 0.79, total_patients: 1120, average_cost: 7900, quality_score: 86 },
                    { department_name: 'Emergency', patient_satisfaction: 3.4, current_occupancy: 0.86, total_patients: 1850, average_cost: 2900, quality_score: 81 },
                    { department_name: 'Oncology', patient_satisfaction: 4.0, current_occupancy: 0.76, total_patients: 320, average_cost: 14800, quality_score: 85 },
                    { department_name: 'Pediatrics', patient_satisfaction: 4.2, current_occupancy: 0.52, total_patients: 640, average_cost: 4100, quality_score: 87 },
                    { department_name: 'Orthopedics', patient_satisfaction: 3.9, current_occupancy: 0.66, total_patients: 580, average_cost: 9200, quality_score: 84 }
                ],
                physicians: [
                    // Cardiology (5 doctors)
                    { first_name: 'Sarah', last_name: 'Johnson', specialty: 'Cardiology', patient_satisfaction: 4.4 },
                    { first_name: 'Robert', last_name: 'Williams', specialty: 'Cardiology', patient_satisfaction: 4.0 },
                    { first_name: 'Lisa', last_name: 'Chen', specialty: 'Cardiology', patient_satisfaction: 4.2 },
                    { first_name: 'Mark', last_name: 'Thompson', specialty: 'Cardiology', patient_satisfaction: 3.8 },
                    { first_name: 'Anna', last_name: 'Rodriguez', specialty: 'Cardiology', patient_satisfaction: 4.3 },
                    // Surgery (5 doctors)
                    { first_name: 'Michael', last_name: 'Chen', specialty: 'Surgery', patient_satisfaction: 4.3 },
                    { first_name: 'Jennifer', last_name: 'Davis', specialty: 'Surgery', patient_satisfaction: 4.2 },
                    { first_name: 'David', last_name: 'Martinez', specialty: 'Surgery', patient_satisfaction: 4.1 },
                    { first_name: 'Rachel', last_name: 'Brown', specialty: 'Surgery', patient_satisfaction: 3.9 },
                    { first_name: 'Steven', last_name: 'Wilson', specialty: 'Surgery', patient_satisfaction: 4.4 },
                    // Emergency (5 doctors)
                    { first_name: 'David', last_name: 'Thompson', specialty: 'Emergency', patient_satisfaction: 4.1 },
                    { first_name: 'Christopher', last_name: 'Brown', specialty: 'Emergency', patient_satisfaction: 3.8 },
                    { first_name: 'Jessica', last_name: 'Miller', specialty: 'Emergency', patient_satisfaction: 3.6 },
                    { first_name: 'Brian', last_name: 'Garcia', specialty: 'Emergency', patient_satisfaction: 3.9 },
                    { first_name: 'Nicole', last_name: 'Anderson', specialty: 'Emergency', patient_satisfaction: 3.7 },
                    // Pediatrics (5 doctors)
                    { first_name: 'Emily', last_name: 'Rodriguez', specialty: 'Pediatrics', patient_satisfaction: 4.5 },
                    { first_name: 'Amanda', last_name: 'Wilson', specialty: 'Pediatrics', patient_satisfaction: 4.3 },
                    { first_name: 'Daniel', last_name: 'Taylor', specialty: 'Pediatrics', patient_satisfaction: 4.1 },
                    { first_name: 'Michelle', last_name: 'Lee', specialty: 'Pediatrics', patient_satisfaction: 4.2 },
                    { first_name: 'Jason', last_name: 'White', specialty: 'Pediatrics', patient_satisfaction: 4.0 },
                    // Oncology (5 doctors)
                    { first_name: 'Lisa', last_name: 'Park', specialty: 'Oncology', patient_satisfaction: 4.2 },
                    { first_name: 'Kevin', last_name: 'Taylor', specialty: 'Oncology', patient_satisfaction: 4.0 },
                    { first_name: 'Sandra', last_name: 'Johnson', specialty: 'Oncology', patient_satisfaction: 4.3 },
                    { first_name: 'Paul', last_name: 'Davis', specialty: 'Oncology', patient_satisfaction: 3.8 },
                    { first_name: 'Karen', last_name: 'Martinez', specialty: 'Oncology', patient_satisfaction: 4.1 },
                    // Orthopedics (5 doctors)
                    { first_name: 'James', last_name: 'Miller', specialty: 'Orthopedics', patient_satisfaction: 3.9 },
                    { first_name: 'Susan', last_name: 'Thompson', specialty: 'Orthopedics', patient_satisfaction: 3.7 },
                    { first_name: 'Richard', last_name: 'Brown', specialty: 'Orthopedics', patient_satisfaction: 4.0 },
                    { first_name: 'Linda', last_name: 'Wilson', specialty: 'Orthopedics', patient_satisfaction: 3.6 },
                    { first_name: 'Thomas', last_name: 'Garcia', specialty: 'Orthopedics', patient_satisfaction: 3.8 },
                    // Neurology (5 doctors)
                    { first_name: 'Maria', last_name: 'Garcia', specialty: 'Neurology', patient_satisfaction: 4.1 },
                    { first_name: 'John', last_name: 'Anderson', specialty: 'Neurology', patient_satisfaction: 3.9 },
                    { first_name: 'Patricia', last_name: 'Martinez', specialty: 'Neurology', patient_satisfaction: 3.7 },
                    { first_name: 'William', last_name: 'Taylor', specialty: 'Neurology', patient_satisfaction: 4.0 },
                    { first_name: 'Barbara', last_name: 'Lee', specialty: 'Neurology', patient_satisfaction: 3.5 }
                ]
            }
        };

        // Function to get filtered data based on current hospital selection
        function getFilteredData(year, hospital = 'all') {
            const yearData = healthcareDataByYear[year] || healthcareDataByYear[2024];
            
            if (hospital === 'all') {
                return {
                    departments: yearData.departments['all'],
                    physicians: yearData.physicians
                };
            }
            
            return {
                departments: yearData.departments[hospital] || yearData.departments['all'],
                physicians: yearData.physicians.filter(p => p.hospital === hospital)
            };
        }
        
        // Function to update all charts when hospital changes
        function updateAllChartsForHospital() {
            currentHospital = document.getElementById('hospitalSelector').value;
            
            // Update all charts with current year and new hospital filter
            setTimeout(() => {
                const selectedSpecialty = document.getElementById('physicianSpecialty')?.value || 'all';
                const qualityFilter = document.getElementById('qualityMetricFilter')?.value || 'departments';
                
                createDepartmentChart(currentTrendsYear, currentHospital);
                createTrendsChart(currentTrendsYear, currentHospital);
                createQualityChart(currentTrendsYear, qualityFilter, currentHospital);
                createPhysiciansChart(currentTrendsYear, selectedSpecialty, currentHospital);
            }, 100);
            
            console.log(`üè• All charts updated for hospital: ${currentHospital}`);
        }
        

        // Function to load dashboard data
        function loadDashboardData() {
            // Use year-specific data
            const yearData = healthcareDataByYear[currentTrendsYear] || healthcareDataByYear[2024];
            const departments = yearData.departments;

            dashboardData.departments = departments;

            // Update all synchronized charts
            setTimeout(() => {
                const selectedSpecialty = document.getElementById('physicianSpecialty')?.value || 'all';
                const qualityFilter = document.getElementById('qualityMetricFilter')?.value || 'departments';
                createDepartmentChart(currentTrendsYear, currentHospital);
                createTrendsChart(currentTrendsYear, currentHospital);
                createQualityChart(currentTrendsYear, qualityFilter, currentHospital);
                createPhysiciansChart(currentTrendsYear, selectedSpecialty, currentHospital);
            }, 500);
        }

        function formatCurrency(amount) {
            if (amount >= 1000000000) return '$' + (amount / 1000000000).toFixed(1) + 'B';
            if (amount >= 1000000) return '$' + (amount / 1000000).toFixed(1) + 'M';
            if (amount >= 1000) return '$' + (amount / 1000).toFixed(0) + 'K';
            return '$' + amount.toLocaleString();
        }

        function createDepartmentChart(selectedYear = 2024, hospitalFilter = 'all') {
            const ctx = document.getElementById('departmentChart');
            if (!ctx) return;

            // Get filtered data based on hospital selection
            const filteredData = getFilteredData(selectedYear, hospitalFilter || currentHospital);
            const departments = filteredData.departments;
            const metric = document.getElementById('performanceMetric').value;
            let data, label, colors, maxValue, formatter;

            switch(metric) {
                case 'satisfaction':
                    data = departments.map(d => d.patient_satisfaction);
                    label = 'Patient Satisfaction';
                    colors = '#667eea';
                    maxValue = 5;
                    formatter = (value) => value.toFixed(1) + '/5';
                    break;
                case 'revenue':
                    // CRITICAL: Calculate actual different revenue values
                    data = departments.map(d => {
                        const revenue = (d.total_patients * d.average_cost) / 1000000;
                        console.log(`${d.department_name}: $${revenue.toFixed(1)}M`);
                        return revenue;
                    });
                    label = 'Revenue (Millions)';
                    colors = ['#10b981', '#3b82f6', '#ef4444', '#8b5cf6', '#f59e0b', '#6366f1'];
                    maxValue = 25; // FIXED max to show clear differences
                    formatter = (value) => '$' + value.toFixed(1) + 'M';
                    break;
                case 'occupancy':
                    data = departments.map(d => d.current_occupancy * 100);
                    label = 'Occupancy Rate';
                    colors = data.map(val => val >= 85 ? '#ef4444' : val >= 75 ? '#f59e0b' : '#10b981');
                    maxValue = 100;
                    formatter = (value) => value.toFixed(1) + '%';
                    break;
            }

            console.log('üìä Chart Data:', data);
            console.log('üìä Expected Revenue: Surgery=11.1M, Emergency=6.7M, Oncology=6.0M');

            if (chartInstances.departmentChart) {
                chartInstances.departmentChart.destroy();
            }

            chartInstances.departmentChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: departments.map(d => d.department_name),
                    datasets: [{
                        label: label,
                        data: data,
                        backgroundColor: Array.isArray(colors) ? colors : colors,
                        borderRadius: 10,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: maxValue,
                            ticks: {
                                callback: function(value) { return formatter(value); }
                            }
                        }
                    }
                }
            });
        }

        function createTrendsChart(selectedYear = 2024) {
            const ctx = document.getElementById('trendsChart');
            if (!ctx) return;
            
            // All 12 months for better visualization
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            // Multi-year data with realistic healthcare patterns
            const yearData = {
                2024: {
                    satisfaction: [4.1, 4.2, 4.0, 4.3, 4.4, 4.5, 4.3, 4.4, 4.6, 4.5, 4.7, 4.6],
                    revenue: [8.2, 7.8, 8.5, 9.1, 9.8, 10.2, 9.9, 10.5, 11.2, 10.8, 11.5, 12.1],
                    volume: [2100, 1950, 2200, 2350, 2500, 2650, 2550, 2700, 2850, 2750, 2900, 3050]
                },
                2023: {
                    satisfaction: [3.9, 4.0, 3.8, 4.1, 4.2, 4.3, 4.1, 4.2, 4.4, 4.3, 4.5, 4.4],
                    revenue: [7.8, 7.4, 8.0, 8.6, 9.2, 9.6, 9.3, 9.9, 10.5, 10.2, 10.8, 11.4],
                    volume: [1950, 1800, 2050, 2200, 2350, 2500, 2400, 2550, 2700, 2600, 2750, 2900]
                },
                2022: {
                    satisfaction: [3.7, 3.8, 3.6, 3.9, 4.0, 4.1, 3.9, 4.0, 4.2, 4.1, 4.3, 4.2],
                    revenue: [7.2, 6.8, 7.4, 8.0, 8.6, 9.0, 8.7, 9.3, 9.9, 9.6, 10.2, 10.8],
                    volume: [1800, 1650, 1900, 2050, 2200, 2350, 2250, 2400, 2550, 2450, 2600, 2750]
                }
            };
            
            const currentData = yearData[selectedYear];
            
            if (chartInstances.trendsChart) {
                chartInstances.trendsChart.destroy();
            }
            
            chartInstances.trendsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Patient Satisfaction',
                        data: currentData.satisfaction,
                        borderColor: 'rgba(34, 197, 94, 1)',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        borderWidth: 3,
                        pointBackgroundColor: 'rgba(34, 197, 94, 1)',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        yAxisID: 'y',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Revenue ($M)',
                        data: currentData.revenue,
                        borderColor: 'rgba(59, 130, 246, 1)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        yAxisID: 'y1',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Patient Volume',
                        data: currentData.volume,
                        borderColor: 'rgba(139, 92, 246, 1)',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        borderWidth: 3,
                        pointBackgroundColor: 'rgba(139, 92, 246, 1)',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        yAxisID: 'y2',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 800,
                        easing: 'easeOutQuart'
                    },
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: { size: 13, weight: '600' },
                                color: '#1a202c',
                                padding: 20,
                                usePointStyle: true,
                                pointStyle: 'circle'
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(26, 32, 44, 0.9)',
                            titleColor: '#ffffff',
                            bodyColor: '#e2e8f0',
                            borderColor: 'rgba(59, 130, 246, 0.6)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            titleFont: { size: 14, weight: '600' },
                            bodyFont: { size: 12 },
                            padding: 12,
                            displayColors: true,
                            usePointStyle: true,
                            callbacks: {
                                title: function(context) {
                                    return `${context[0].label} ${selectedYear} Performance`;
                                },
                                label: function(context) {
                                    let value = context.parsed.y;
                                    if (context.dataset.label === 'Patient Satisfaction') {
                                        return `${context.dataset.label}: ${value.toFixed(1)}/5.0 ‚≠ê`;
                                    } else if (context.dataset.label === 'Revenue ($M)') {
                                        return `${context.dataset.label}: $${value.toFixed(1)}M üí∞`;
                                    } else {
                                        return `${context.dataset.label}: ${value.toLocaleString()} patients üë•`;
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: { display: false },
                            ticks: {
                                color: '#4a5568',
                                font: { size: 11, weight: '500' }
                            }
                        },
                        y: { 
                            type: 'linear', 
                            display: true, 
                            position: 'left',
                            min: 3.5,
                            max: 5.0,
                            grid: {
                                color: 'rgba(34, 197, 94, 0.15)',
                                lineWidth: 1
                            },
                            ticks: {
                                color: 'rgba(34, 197, 94, 1)',
                                font: { size: 10, weight: '600' },
                                callback: function(value) {
                                    return value.toFixed(1) + '/5';
                                }
                            },
                            title: {
                                display: true,
                                text: 'Satisfaction ‚≠ê',
                                color: 'rgba(34, 197, 94, 1)',
                                font: { size: 11, weight: '600' }
                            }
                        },
                        y1: { 
                            type: 'linear', 
                            display: true, 
                            position: 'right',
                            min: 6,
                            max: 14,
                            grid: { drawOnChartArea: false },
                            ticks: {
                                color: 'rgba(59, 130, 246, 1)',
                                font: { size: 10, weight: '600' },
                                callback: function(value) {
                                    return '$' + value.toFixed(1) + 'M';
                                }
                            },
                            title: {
                                display: true,
                                text: 'Revenue üí∞',
                                color: 'rgba(59, 130, 246, 1)',
                                font: { size: 11, weight: '600' }
                            }
                        },
                        y2: { 
                            type: 'linear', 
                            display: false, 
                            position: 'right',
                            min: 1500,
                            max: 3200
                        }
                    }
                }
            });
        }



        function createPhysiciansChart(selectedYear = 2024, selectedSpecialty = 'all', selectedHospital = 'all') {
            const ctx = document.getElementById('physiciansChart');
            if (!ctx) return;

            // Get hospital-filtered physician data
            const filteredData = getFilteredData(selectedYear, selectedHospital);
            let physicians = filteredData.physicians;
            
            // Filter by specialty if not 'all'
            if (selectedSpecialty && selectedSpecialty !== 'all') {
                physicians = physicians.filter(p => p.specialty === selectedSpecialty);
            }
            
            // Sort by satisfaction and take top performers
            const topPhysicians = physicians
                .sort((a, b) => (b.patient_satisfaction || 0) - (a.patient_satisfaction || 0))
                .slice(0, 5); // Top 5 physicians
            
            if (chartInstances.physiciansChart) {
                chartInstances.physiciansChart.destroy();
            }

            chartInstances.physiciansChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: topPhysicians.map(p => `Dr. ${p.first_name} ${p.last_name.charAt(0)}.`),
                    datasets: [{
                        label: `${selectedYear} Patient Satisfaction${selectedSpecialty !== 'all' ? ` (${selectedSpecialty})` : ''}${selectedHospital !== 'all' ? ` - ${selectedHospital}` : ''}`,
                        data: topPhysicians.map(p => p.patient_satisfaction),
                        backgroundColor: selectedSpecialty !== 'all' ? 
                            getSpecialtyColor(selectedSpecialty) : '#8b5cf6',
                        borderRadius: 8
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: true },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    const index = context[0].dataIndex;
                                    const physician = topPhysicians[index];
                                    return `Dr. ${physician.first_name} ${physician.last_name} (${physician.specialty}) - ${physician.hospital}`;
                                },
                                label: function(context) {
                                    const score = context.parsed.x;
                                    let performance = 'Excellent';
                                    if (score < 4.0) performance = 'Good';
                                    else if (score < 4.5) performance = 'Very Good';
                                    return `${selectedYear} Satisfaction: ${score.toFixed(1)}/5.0 (${performance})`;
                                },
                                afterBody: function(context) {
                                    const index = context[0].dataIndex;
                                    const physician = topPhysicians[index];
                                    const score = physician.patient_satisfaction;
                                    let performance = 'Excellent';
                                    if (score < 4.0) performance = 'Good';
                                    else if (score < 4.5) performance = 'Very Good';
                                    return [`Performance Level: ${performance} ‚≠ê`, `Hospital: ${physician.hospital}`];
                                }
                            }
                        }
                    },
                    scales: { 
                        x: { 
                            max: 5,
                            title: {
                                display: true,
                                text: 'Patient Satisfaction Score'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: selectedHospital !== 'all' ? `${selectedHospital} - ${selectedSpecialty !== 'all' ? selectedSpecialty : 'All Specialties'}` : (selectedSpecialty !== 'all' ? selectedSpecialty : 'All Specialties')
                            }
                        }
                    }
                }
            });
        }
        
        // Helper function to get specialty-specific colors
        function getSpecialtyColor(specialty) {
            const colors = {
                'Cardiology': '#ef4444',    // Red - heart
                'Surgery': '#3b82f6',       // Blue - precision
                'Emergency': '#f59e0b',     // Orange - urgency
                'Pediatrics': '#10b981',    // Green - growth
                'Oncology': '#8b5cf6',      // Purple - specialty
                'Orthopedics': '#6366f1',   // Indigo - structure
                'Neurology': '#ec4899'      // Pink - brain
            };
            return colors[specialty] || '#8b5cf6';
        }
        
        // Function to update physicians chart when specialty changes
        function updatePhysiciansChart() {
            const selectedSpecialty = document.getElementById('physicianSpecialty').value;
            createPhysiciansChart(currentTrendsYear, selectedSpecialty, currentHospital);
        }
        
        // Enhanced Quality Metrics Data for all years
        const qualityMetricsByYear = {
            2024: {
                departments: {
                    'Cardiology': { safety: 85, efficiency: 88, satisfaction: 82, outcomes: 87, innovation: 83 }, // Good overall with some struggling hospitals
                    'Surgery': { safety: 96, efficiency: 89, satisfaction: 91, outcomes: 95, innovation: 87 }, // Top performing overall
                    'Emergency': { safety: 78, efficiency: 82, satisfaction: 75, outcomes: 80, innovation: 77 }, // Mixed performance across hospitals
                    'Pediatrics': { safety: 95, efficiency: 93, satisfaction: 96, outcomes: 94, innovation: 88 }, // Excellent overall
                    'Oncology': { safety: 76, efficiency: 73, satisfaction: 70, outcomes: 74, innovation: 68 }, // Struggling department with crisis at some hospitals
                    'Orthopedics': { safety: 81, efficiency: 84, satisfaction: 79, outcomes: 83, innovation: 76 }, // Good with variations
                    'Neurology': { safety: 92, efficiency: 89, satisfaction: 87, outcomes: 90, innovation: 86 } // Consistently good
                },
                hospital: {
                    'Main Campus': { safety: 93, efficiency: 89, satisfaction: 88, outcomes: 92, innovation: 87 }, // Strong overall
                    'Emergency Wing': { safety: 76, efficiency: 79, satisfaction: 73, outcomes: 78, innovation: 74 }, // Needs improvement
                    'Surgical Center': { safety: 95, efficiency: 91, satisfaction: 90, outcomes: 94, innovation: 88 } // Excellence center
                }
            },
            2023: {
                departments: {
                    'Cardiology': { safety: 83, efficiency: 86, satisfaction: 80, outcomes: 85, innovation: 81 }, // Slightly lower overall
                    'Surgery': { safety: 93, efficiency: 86, satisfaction: 88, outcomes: 92, innovation: 84 }, // Strong performance
                    'Emergency': { safety: 75, efficiency: 79, satisfaction: 72, outcomes: 77, innovation: 74 }, // Mixed with some hospitals excelling
                    'Pediatrics': { safety: 92, efficiency: 90, satisfaction: 93, outcomes: 91, innovation: 85 }, // Consistently good
                    'Oncology': { safety: 73, efficiency: 70, satisfaction: 67, outcomes: 71, innovation: 65 }, // Struggling department overall
                    'Orthopedics': { safety: 78, efficiency: 81, satisfaction: 76, outcomes: 80, innovation: 73 }, // Good with hospital variations
                    'Neurology': { safety: 89, efficiency: 86, satisfaction: 84, outcomes: 87, innovation: 83 } // Solid performance
                },
                hospital: {
                    'Main Campus': { safety: 90, efficiency: 86, satisfaction: 85, outcomes: 89, innovation: 84 },
                    'Emergency Wing': { safety: 73, efficiency: 76, satisfaction: 70, outcomes: 75, innovation: 72 }, // Needs improvement but not crisis
                    'Surgical Center': { safety: 92, efficiency: 88, satisfaction: 87, outcomes: 91, innovation: 85 }
                }
            },
            2022: {
                departments: {
                    'Cardiology': { safety: 88, efficiency: 85, satisfaction: 82, outcomes: 86, innovation: 79 },
                    'Surgery': { safety: 90, efficiency: 83, satisfaction: 85, outcomes: 89, innovation: 81 },
                    'Emergency': { safety: 41, efficiency: 36, satisfaction: 39, outcomes: 44, innovation: 40 }, // Worst historical period
                    'Pediatrics': { safety: 89, efficiency: 87, satisfaction: 90, outcomes: 88, innovation: 82 },
                    'Oncology': { safety: 87, efficiency: 82, satisfaction: 83, outcomes: 85, innovation: 86 },
                    'Orthopedics': { safety: 49, efficiency: 42, satisfaction: 45, outcomes: 51, innovation: 38 }, // Rock bottom performance
                    'Neurology': { safety: 86, efficiency: 83, satisfaction: 81, outcomes: 84, innovation: 80 }
                },
                hospital: {
                    'Main Campus': { safety: 87, efficiency: 83, satisfaction: 82, outcomes: 86, innovation: 81 },
                    'Emergency Wing': { safety: 37, efficiency: 32, satisfaction: 35, outcomes: 40, innovation: 34 }, // Crisis-level historical performance
                    'Surgical Center': { safety: 89, efficiency: 85, satisfaction: 84, outcomes: 88, innovation: 82 }
                }
            }
        };

        // Function to create enhanced quality chart with department/hospital filtering
        function createQualityChart(selectedYear = 2024, filterType = 'departments') {
            const ctx = document.getElementById('qualityChart');
            if (!ctx) return;
            
            // Get year-specific quality metrics
            const yearData = qualityMetricsByYear[selectedYear] || qualityMetricsByYear[2024];
            const qualityMetrics = yearData[filterType] || yearData.departments;
            
            let chartData, labels;
            
            if (filterType === 'departments') {
                labels = Object.keys(qualityMetrics);
                chartData = {
                    labels: labels,
                    datasets: [{
                        label: `${selectedYear} Safety Score`,
                        data: labels.map(dept => qualityMetrics[dept].safety),
                        backgroundColor: 'rgba(239, 68, 68, 0.7)',
                        borderColor: 'rgba(239, 68, 68, 1)',
                        borderWidth: 2
                    }, {
                        label: `${selectedYear} Efficiency Score`,
                        data: labels.map(dept => qualityMetrics[dept].efficiency),
                        backgroundColor: 'rgba(59, 130, 246, 0.7)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 2
                    }, {
                        label: `${selectedYear} Satisfaction Score`,
                        data: labels.map(dept => qualityMetrics[dept].satisfaction),
                        backgroundColor: 'rgba(16, 185, 129, 0.7)',
                        borderColor: 'rgba(16, 185, 129, 1)',
                        borderWidth: 2
                    }, {
                        label: `${selectedYear} Outcomes Score`,
                        data: labels.map(dept => qualityMetrics[dept].outcomes),
                        backgroundColor: 'rgba(139, 92, 246, 0.7)',
                        borderColor: 'rgba(139, 92, 246, 1)',
                        borderWidth: 2
                    }, {
                        label: `${selectedYear} Innovation Score`,
                        data: labels.map(dept => qualityMetrics[dept].innovation),
                        backgroundColor: 'rgba(245, 158, 11, 0.7)',
                        borderColor: 'rgba(245, 158, 11, 1)',
                        borderWidth: 2
                    }]
                };
            } else {
                // Hospital-based quality metrics
                // Filter out 'overall' to remove the overall performance score
                const filteredQualityMetrics = Object.keys(qualityMetrics)
                    .filter(key => key !== 'overall')
                    .reduce((obj, key) => {
                        obj[key] = qualityMetrics[key];
                        return obj;
                    }, {});
                
                labels = Object.keys(filteredQualityMetrics);
                chartData = {
                    labels: labels,
                    datasets: [{
                        label: `${selectedYear} Safety Score`,
                        data: labels.map(unit => filteredQualityMetrics[unit].safety),
                        backgroundColor: 'rgba(239, 68, 68, 0.7)',
                        borderColor: 'rgba(239, 68, 68, 1)',
                        borderWidth: 2
                    }, {
                        label: `${selectedYear} Efficiency Score`,
                        data: labels.map(unit => filteredQualityMetrics[unit].efficiency),
                        backgroundColor: 'rgba(59, 130, 246, 0.7)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 2
                    }, {
                        label: `${selectedYear} Satisfaction Score`,
                        data: labels.map(unit => filteredQualityMetrics[unit].satisfaction),
                        backgroundColor: 'rgba(16, 185, 129, 0.7)',
                        borderColor: 'rgba(16, 185, 129, 1)',
                        borderWidth: 2
                    }, {
                        label: `${selectedYear} Outcomes Score`,
                        data: labels.map(unit => filteredQualityMetrics[unit].outcomes),
                        backgroundColor: 'rgba(139, 92, 246, 0.7)',
                        borderColor: 'rgba(139, 92, 246, 1)',
                        borderWidth: 2
                    }, {
                        label: `${selectedYear} Innovation Score`,
                        data: labels.map(unit => filteredQualityMetrics[unit].innovation),
                        backgroundColor: 'rgba(245, 158, 11, 0.7)',
                        borderColor: 'rgba(245, 158, 11, 1)',
                        borderWidth: 2
                    }]
                };
            }
            
            // Destroy existing chart
            if (chartInstances.qualityChart) {
                chartInstances.qualityChart.destroy();
            }
            
            // Create new quality chart
            chartInstances.qualityChart = new Chart(ctx, {
                type: 'bar',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                boxWidth: 12,
                                padding: 15
                            }
                        },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    const label = context[0].label;
                                    return `${label} (${selectedYear}) - ${filterType.charAt(0).toUpperCase() + filterType.slice(1)}`;
                                },
                                label: function(context) {
                                    const score = context.parsed.y;
                                    let performance = 'Excellent';
                                    if (score < 80) performance = 'Needs Improvement';
                                    else if (score < 90) performance = 'Good';
                                    return `${context.dataset.label}: ${score}/100 (${performance})`;
                                },
                                afterBody: function(context) {
                                    // Remove redundant unit performance display
                                    return [];
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Quality Score (0-100)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: filterType === 'departments' ? 'Medical Departments' : 'Hospital Units'
                            }
                        }
                    }
                }
            });
        }
        
        // Function to update quality chart when filter changes
        function updateQualityChart() {
            const filterType = document.getElementById('qualityMetricFilter').value;
            createQualityChart(currentTrendsYear, filterType);
            console.log(`üìä Quality chart updated for ${currentTrendsYear} - ${filterType}`);
        }

        // Chart metric change handler
        document.addEventListener('DOMContentLoaded', function() {
            const performanceMetric = document.getElementById('performanceMetric');
            if (performanceMetric) {
                performanceMetric.addEventListener('change', function() {
                    createDepartmentChart(currentTrendsYear, currentHospital);
                });
            }
        });
        
        /**
         * Change Trends Chart Year
         * Updates all dashboard charts to show data for the selected year while maintaining hospital filter
         */
        function changeTrendsYear(year) {
            // Update current year
            currentTrendsYear = year;
            
            // Update active tab styling
            document.querySelectorAll('.year-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-year="${year}"]`).classList.add('active');
            
            // Get year-specific data
            const yearData = healthcareDataByYear[year] || healthcareDataByYear[2024];
            
            // Update all synchronized charts with smooth transitions
            setTimeout(() => {
                const selectedSpecialty = document.getElementById('physicianSpecialty')?.value || 'all';
                const qualityFilter = document.getElementById('qualityMetricFilter')?.value || 'departments';
                
                createTrendsChart(year, currentHospital);
                createDepartmentChart(year, currentHospital);
                createQualityChart(year, qualityFilter);
                createPhysiciansChart(year, selectedSpecialty, currentHospital);
            }, 100);
            
            console.log(`üìÖ Dashboard synchronized to ${year} data with hospital: ${currentHospital}`);
        }
        
        /**
         * Load Dashboard Data
         * Initialize and load all dashboard data with current filters
         */
        function loadDashboardData() {
            // Use year-specific data
            const yearData = healthcareDataByYear[currentTrendsYear] || healthcareDataByYear[2024];
            const departments = yearData.departments;

            dashboardData.departments = departments;

            // Update all synchronized charts
            setTimeout(() => {
                const selectedSpecialty = document.getElementById('physicianSpecialty')?.value || 'all';
                const qualityFilter = document.getElementById('qualityMetricFilter')?.value || 'departments';
                createDepartmentChart(currentTrendsYear);
                createTrendsChart(currentTrendsYear);
                createQualityChart(currentTrendsYear, qualityFilter);
                createPhysiciansChart(currentTrendsYear, selectedSpecialty);
            }, 500);
        }
        

        // Make function globally available
        window.changeTrendsYear = changeTrendsYear;
    </script>
    
    <!-- n8n Webhook Integration -->
    <script src="scripts/n8n_webhook_integration.js"></script>
</body>
</html>